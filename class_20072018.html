<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
</body>

<script>

    // Function finds Sizes Randomaly
    var  findRandom = ((min,max) => {
        return (max - (Math.round( Math.random() * (max-min) )))
    });
    
    

    // Function finds How much cells free in right side
    var countRightFreeCells = ((place,arr) => {
        var howMuch = 0;
        if (arr[place] ==1) 
            return (-1);
        place++;
        while (place < arr.length) {
           if (arr[place] == 0) {
            howMuch++;
            place++;
           }
           else
            return (howMuch);
        }
        return (howMuch);
    });
    
    //Function finds How much cells free in left side
    var countLeftFreeCells = ((place,arr) => {
        var howMuch = 0;
        if (arr[place] ==1) 
            return (-1);
        place--;
        while (place >= 0) {
           if (arr[place] == 0) {
            howMuch++;
            place--;
           }
           else {
               return (howMuch);
           }
        }
        return (howMuch);
    });

    //Function puts submarines randomally, according to details
    var fillOnes = (( numFreeToLeft,numFreeToRight,sizeOfSub,place,arr) => {
        arr[place] = 1;
        for (var i = place+1;(i-place<=numFreeToRight);i++) {
            if ((i - place >= sizeOfSub))
                break;
            else
                arr[i] = 1;
        }
        var cellsToContinue =  sizeOfSub - (numFreeToRight  + 1);
        while (cellsToContinue > 0) {
            arr[--place] = 1;
            cellsToContinue--;
        }
    });

    //Main:

    var arr;
    var fit = false;
    while (!fit) {
        var maxArrCell = 20;
        var minArrCell = 10;
        var rndmSizeArr = findRandom(maxArrCell,minArrCell);
        var maxNumOfSub = 3;
        var minNumOfSub = 1;
        var rndmNumOfSub = findRandom(maxNumOfSub,minNumOfSub);
        var maxSubSize = 4;
        var minSubSize = 2;
        var rndmSubSize = findRandom(maxSubSize,minSubSize);
        if (rndmSizeArr >= (rndmNumOfSub*rndmSubSize)) {
            fit = true;
            arr = new Array(rndmSizeArr);
        }
    }
    
    arr.fill(0);
    var count = 0;
    //puting submarines randomally
    while (count < rndmNumOfSub) {
        place = Math.round(Math.random() * (rndmSizeArr-1));
        console.log("checking if submarine can be placed in cell number: "+place);
        var numFreeToLeft = countLeftFreeCells(place,arr);
        var numFreeToRight = countRightFreeCells(place,arr);
        if (numFreeToLeft + numFreeToRight >= (rndmSubSize - 1)) {
            fillOnes(numFreeToLeft,numFreeToRight,rndmSubSize,place,arr);
            count++;
            console.log("submarine have been placed");

        }
        else    
            console.log("there was no place to add submarine to array");
    } 
    console.log("array after putting submarines "+arr);
    //interacting with user
    var times = 13;
    alert("you have "+times+ " times to guess where are the "+rndmNumOfSub+" submarines, sized: "+rndmSubSize+" in array with "+rndmSizeArr+" cells");
    var guessNumber = 1;
    var userInput;
    while (times > 0) {
        userInput = window.prompt("guess number "+guessNumber+" will be:");
        if ((userInput >=0)  && (userInput < arr.length)) {
            if(arr[userInput] == 1)
            {
                arr[userInput] = 2;
                alert ("Boom - you hit the submarine");
                times--;
            }
            else {
                alert ("You missed the submarine");
                times--;

            }
        }
        else 
            alert("Try again, your input is illegal");
        
        if (arr.includes(1) == false) {
            alert ("you hit all the submarines")
            break;
        }
    }
    if (arr.includes(1))
        alert ("you failed to hit all the submarines")
    
        console.log("array after user input "+arr);
    
    
       

  



    

    
    
   
   


    
    

    /*while (numOfSubmarines > 0) {
        var rndm = ((maxArrayCell - Math.floor(MATH.random() * (maxArrayCell-minArrayCell)))-1 );
        if (rndm = 0 && (array[rndm+1] ==0) )
            array.splice(0,2,1);
        else if (rndm = (MATH.max(firstCell,maxArrayCell)-1) && (array[rndm-1] == 0))
            array.splice((maxArrayCell-2),2,1);
        
        
        numOfSubmarines--;
    }
    // what we did in the start
    var hitCounter = 0;
    var submarineLength = submarine.reduce((a,b)=>a+b);
    var answer ; 
    while (hitCounter < submarineLength) {
        answer = prompt("please enter your hit");
        if ((answer >= 1) && (answer <= submarine.length))  {
            if (submarine[answer-1] == 1) {
                hitCounter++;
                submarine[answer-1] = 2;
                alert("you hit the target");
                
            }    
            else
                alert("you missed  the target");
        }
        
    } */



</script>
</html>